/*
THIS IS A GENERATED/BUNDLED FILE BY ROLLUP
if you want to view the source visit the plugins github repository
*/

'use strict';

var obsidian = require('obsidian');

// Remove Widgets in CodeMirror Editor
const clearWidgets = (cm) => {
    var lastLine = cm.lastLine();
    for (let i = 0; i <= lastLine; i++) {
        const line = cm.lineInfo(i);
        clearLineWidgets(line);
    }
};
// Clear Single Line Widget
const clearLineWidgets = (line) => {
    if (line.widgets) {
        for (const wid of line.widgets) {
            if (wid.className === 'oz-image-widget') {
                wid.clear();
            }
        }
    }
};
// Check line if it is a link
const get_link_in_line = (line) => {
    const image_http_regex_3 = /!\[\[[a-z][a-z0-9+\-.]+:\/.*\]\]/;
    const image_http_regex_4 = /!\[(^$|.*)\]\([a-z][a-z0-9+\-.]+:\/.*\)/;
    const match_3 = line.match(image_http_regex_3);
    const match_4 = line.match(image_http_regex_4);
    if (match_3) {
        return { result: match_3, linkType: 3 };
    }
    else if (match_4) {
        return { result: match_4, linkType: 4 };
    }
    return { result: false, linkType: 0 };
};
// Check line if it is image
const get_image_in_line = (line) => {
    // Regex for [[ ]] format
    const image_line_regex_1 = /!\[\[.*(jpe?g|png|gif|svg|bmp).*\]\]/;
    // Regex for ![ ]( ) format
    const image_line_regex_2 = /!\[(^$|.*)\]\(.*(jpe?g|png|gif|svg|bmp)\)/;
    const match_1 = line.match(image_line_regex_1);
    const match_2 = line.match(image_line_regex_2);
    if (match_1) {
        return { result: match_1, linkType: 1 };
    }
    else if (match_2) {
        return { result: match_2, linkType: 2 };
    }
    return { result: false, linkType: 0 };
};
// Image Name and Alt Text
const getFileNameAndAltText = (linkType, match) => {
    /*
       linkType 1: ![[myimage.jpg|#x-small]], linkType 2: ![#x-small](myimage.jpg)
       linkType 3: ![[https://image|#x-small]], linkType 4: ![#x-small](https://image)
       returns { fileName: '', altText: '' }
    */
    var file_name_regex;
    var alt_regex;
    if (linkType == 1 || linkType == 3) {
        if (linkType == 1)
            file_name_regex = /(?<=\[\[).*(jpe?g|png|gif|svg|bmp)/;
        if (linkType == 3)
            file_name_regex = /(?<=\[\[).*(?=\|)|(?<=\[\[).*(?=\]\])/;
        alt_regex = /(?<=\|).*(?=]])/;
    }
    else if (linkType == 2 || linkType == 4) {
        if (linkType == 2)
            file_name_regex = /(?<=\().*(jpe?g|png|gif|svg|bmp)/;
        if (linkType == 4)
            file_name_regex = /(?<=\().*(?=\))/;
        alt_regex = /(?<=\[)(^$|.*)(?=\])/;
    }
    var file_match = match[0].match(file_name_regex);
    var alt_match = match[0].match(alt_regex);
    return { fileName: file_match ? file_match[0] : '',
        altText: alt_match ? alt_match[0] : '' };
};
// Getting Active Markdown File
const getActiveNoteFile = (workspace) => {
    return workspace.getActiveFile();
};
const getPathOfVault = (vault) => {
    var path = vault.adapter.basePath;
    if (path.startsWith('/'))
        return 'app://local' + path;
    return 'app://local/' + path;
};
// Temporary Solution until getResourcePath improved 
const getPathOfImage = (vault, image) => {
    // vault.getResourcePath(image) 
    return getPathOfVault(vault) + '/' + image.path;
};
const getFileCmBelongsTo = (cm, workspace) => {
    var _a;
    let leafs = workspace.getLeavesOfType("markdown");
    for (let i = 0; i < leafs.length; i++) {
        if (leafs[i].view instanceof obsidian.MarkdownView && ((_a = leafs[i].view.sourceMode) === null || _a === void 0 ? void 0 : _a.cmEditor) == cm) {
            return leafs[i].view.file;
        }
    }
    return null;
};

// Check Single Line
const check_line = (cm, line_number, targetFile, app) => {
    // Get the Line edited
    const line = cm.lineInfo(line_number);
    if (line === null)
        return;
    // Check if the line is an internet link
    const link_in_line = get_link_in_line(line.text);
    const img_in_line = get_image_in_line(line.text);
    // Clear the widget if link was removed
    var line_image_widget = line.widgets ? line.widgets.filter((wid) => wid.className === 'oz-image-widget') : false;
    if (line_image_widget && !(img_in_line.result || link_in_line.result))
        line_image_widget[0].clear();
    // If any of regex matches, it will add image widget
    if (link_in_line.result || img_in_line.result) {
        // Clear the image widgets if exists
        clearLineWidgets(line);
        // Get the file name and alt text depending on format
        var filename = '';
        var alt = '';
        if (link_in_line.result) {
            // linkType 3 and 4
            filename = getFileNameAndAltText(link_in_line.linkType, link_in_line.result).fileName;
            alt = getFileNameAndAltText(link_in_line.linkType, link_in_line.result).altText;
        }
        else if (img_in_line.result) {
            filename = getFileNameAndAltText(img_in_line.linkType, img_in_line.result).fileName;
            alt = getFileNameAndAltText(img_in_line.linkType, img_in_line.result).altText;
        }
        // Create Image
        const img = document.createElement('img');
        // Prepare the src for the Image
        if (link_in_line.result) {
            img.src = filename;
        }
        else {
            // Source Path
            var sourcePath = '';
            if (targetFile != null) {
                sourcePath = targetFile.path;
            }
            else {
                let activeNoteFile = getActiveNoteFile(app.workspace);
                sourcePath = activeNoteFile ? activeNoteFile.path : '';
            }
            var image = app.metadataCache.getFirstLinkpathDest(decodeURIComponent(filename), sourcePath);
            if (image != null)
                img.src = getPathOfImage(app.vault, image);
        }
        // Image Properties
        img.alt = alt;
        // Add Image widget under the Image Markdown
        cm.addLineWidget(line_number, img, { className: 'oz-image-widget' });
    }
};
// Check All Lines Function
const check_lines = (cm, from, to, app) => {
    // Last Used Line Number in Code Mirror
    var file = getFileCmBelongsTo(cm, app.workspace);
    for (let i = from; i <= to; i++) {
        check_line(cm, i, file, app);
    }
};

class OzanImagePlugin extends obsidian.Plugin {
    constructor() {
        super(...arguments);
        // Line Edit Changes
        this.codemirrorLineChanges = (cm, change) => {
            check_lines(cm, change.from.line, change.from.line + change.text.length - 1, this.app);
        };
        // Only Triggered during initial Load
        this.handleInitialLoad = (cm) => {
            var lastLine = cm.lastLine();
            var file = getFileCmBelongsTo(cm, this.app.workspace);
            for (let i = 0; i < lastLine; i++) {
                check_line(cm, i, file, this.app);
            }
        };
    }
    onload() {
        console.log('Image in Editor Plugin is loaded');
        // Register event for each change
        this.registerCodeMirror((cm) => {
            cm.on("change", this.codemirrorLineChanges);
            this.handleInitialLoad(cm);
        });
    }
    onunload() {
        this.app.workspace.iterateCodeMirrors((cm) => {
            cm.off("change", this.codemirrorLineChanges);
            clearWidgets(cm);
        });
        console.log('Image in Editor Plugin is unloaded');
    }
}

module.exports = OzanImagePlugin;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsic3JjL3V0aWxzLnRzIiwic3JjL2NoZWNrLWxpbmUudHMiLCJzcmMvbWFpbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBXb3Jrc3BhY2UsIE1hcmtkb3duVmlldywgVmF1bHQsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG4vLyBSZW1vdmUgV2lkZ2V0cyBpbiBDb2RlTWlycm9yIEVkaXRvclxuZXhwb3J0IGNvbnN0IGNsZWFyV2lkZ2V0cyA9IChjbTogQ29kZU1pcnJvci5FZGl0b3IpID0+IHtcbiAgICB2YXIgbGFzdExpbmUgPSBjbS5sYXN0TGluZSgpO1xuICAgIGZvcihsZXQgaT0wOyBpIDw9IGxhc3RMaW5lOyBpKyspe1xuICAgICAgICBjb25zdCBsaW5lID0gY20ubGluZUluZm8oaSk7XG4gICAgICAgIGNsZWFyTGluZVdpZGdldHMobGluZSk7XG4gICAgfVxufVxuXG4vLyBDbGVhciBTaW5nbGUgTGluZSBXaWRnZXRcbmV4cG9ydCBjb25zdCBjbGVhckxpbmVXaWRnZXRzID0gKGxpbmU6IGFueSkgPT4ge1xuICAgIGlmKGxpbmUud2lkZ2V0cyl7XG4gICAgICAgIGZvcihjb25zdCB3aWQgb2YgbGluZS53aWRnZXRzKXtcbiAgICAgICAgICAgIGlmICh3aWQuY2xhc3NOYW1lID09PSAnb3otaW1hZ2Utd2lkZ2V0Jyl7XG4gICAgICAgICAgICAgICAgd2lkLmNsZWFyKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuLy8gQ2hlY2sgbGluZSBpZiBpdCBpcyBhIGxpbmtcbmV4cG9ydCBjb25zdCBnZXRfbGlua19pbl9saW5lID0gKGxpbmU6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IGltYWdlX2h0dHBfcmVnZXhfMyA9IC8hXFxbXFxbW2Etel1bYS16MC05K1xcLS5dKzpcXC8uKlxcXVxcXS9cbiAgICBjb25zdCBpbWFnZV9odHRwX3JlZ2V4XzQgPSAvIVxcWyheJHwuKilcXF1cXChbYS16XVthLXowLTkrXFwtLl0rOlxcLy4qXFwpL1xuICAgIGNvbnN0IG1hdGNoXzMgPSBsaW5lLm1hdGNoKGltYWdlX2h0dHBfcmVnZXhfMyk7XG4gICAgY29uc3QgbWF0Y2hfNCA9IGxpbmUubWF0Y2goaW1hZ2VfaHR0cF9yZWdleF80KTtcbiAgICBpZihtYXRjaF8zKXtcbiAgICAgICAgcmV0dXJuIHsgcmVzdWx0OiBtYXRjaF8zLCBsaW5rVHlwZTogMyB9O1xuICAgIH0gZWxzZSBpZihtYXRjaF80KXtcbiAgICAgICAgcmV0dXJuIHsgcmVzdWx0OiBtYXRjaF80LCBsaW5rVHlwZTogNCB9O1xuICAgIH1cbiAgICByZXR1cm4geyByZXN1bHQ6IGZhbHNlLCBsaW5rVHlwZTogMCB9O1xufVxuXG4vLyBDaGVjayBsaW5lIGlmIGl0IGlzIGltYWdlXG5leHBvcnQgY29uc3QgZ2V0X2ltYWdlX2luX2xpbmUgPSAobGluZTogc3RyaW5nKSA9PiB7XG4gICAgLy8gUmVnZXggZm9yIFtbIF1dIGZvcm1hdFxuICAgIGNvbnN0IGltYWdlX2xpbmVfcmVnZXhfMSA9IC8hXFxbXFxbLiooanBlP2d8cG5nfGdpZnxzdmd8Ym1wKS4qXFxdXFxdL1xuICAgIC8vIFJlZ2V4IGZvciAhWyBdKCApIGZvcm1hdFxuICAgIGNvbnN0IGltYWdlX2xpbmVfcmVnZXhfMiA9IC8hXFxbKF4kfC4qKVxcXVxcKC4qKGpwZT9nfHBuZ3xnaWZ8c3ZnfGJtcClcXCkvXG4gICAgY29uc3QgbWF0Y2hfMSA9IGxpbmUubWF0Y2goaW1hZ2VfbGluZV9yZWdleF8xKTtcbiAgICBjb25zdCBtYXRjaF8yID0gbGluZS5tYXRjaChpbWFnZV9saW5lX3JlZ2V4XzIpO1xuICAgIGlmKG1hdGNoXzEpe1xuICAgICAgICByZXR1cm4geyByZXN1bHQ6IG1hdGNoXzEsIGxpbmtUeXBlOiAxfVxuICAgIH1lbHNlIGlmKG1hdGNoXzIpe1xuICAgICAgICByZXR1cm4geyByZXN1bHQ6IG1hdGNoXzIsIGxpbmtUeXBlOiAyfVxuICAgIH1cbiAgICByZXR1cm4geyByZXN1bHQ6IGZhbHNlLCBsaW5rVHlwZTogMH1cbn1cblxuIC8vIEltYWdlIE5hbWUgYW5kIEFsdCBUZXh0XG5leHBvcnQgY29uc3QgZ2V0RmlsZU5hbWVBbmRBbHRUZXh0ID0gKGxpbmtUeXBlOiBudW1iZXIsIG1hdGNoOiBhbnkpID0+IHtcbiAgICAvKiBcbiAgICAgICBsaW5rVHlwZSAxOiAhW1tteWltYWdlLmpwZ3wjeC1zbWFsbF1dLCBsaW5rVHlwZSAyOiAhWyN4LXNtYWxsXShteWltYWdlLmpwZykgXG4gICAgICAgbGlua1R5cGUgMzogIVtbaHR0cHM6Ly9pbWFnZXwjeC1zbWFsbF1dLCBsaW5rVHlwZSA0OiAhWyN4LXNtYWxsXShodHRwczovL2ltYWdlKSBcbiAgICAgICByZXR1cm5zIHsgZmlsZU5hbWU6ICcnLCBhbHRUZXh0OiAnJyB9ICAgXG4gICAgKi9cbiAgICB2YXIgZmlsZV9uYW1lX3JlZ2V4O1xuICAgIHZhciBhbHRfcmVnZXg7XG5cbiAgICBpZihsaW5rVHlwZSA9PSAxIHx8IGxpbmtUeXBlID09IDMpe1xuICAgICAgICBpZihsaW5rVHlwZSA9PSAxKSBmaWxlX25hbWVfcmVnZXggPSAvKD88PVxcW1xcWykuKihqcGU/Z3xwbmd8Z2lmfHN2Z3xibXApLztcbiAgICAgICAgaWYobGlua1R5cGUgPT0gMykgZmlsZV9uYW1lX3JlZ2V4ID0gLyg/PD1cXFtcXFspLiooPz1cXHwpfCg/PD1cXFtcXFspLiooPz1cXF1cXF0pLztcbiAgICAgICAgYWx0X3JlZ2V4ID0gLyg/PD1cXHwpLiooPz1dXSkvO1xuICAgIH0gZWxzZSBpZihsaW5rVHlwZSA9PSAyIHx8IGxpbmtUeXBlID09IDQpe1xuICAgICAgICBpZihsaW5rVHlwZSA9PSAyKSBmaWxlX25hbWVfcmVnZXggPSAvKD88PVxcKCkuKihqcGU/Z3xwbmd8Z2lmfHN2Z3xibXApLztcbiAgICAgICAgaWYobGlua1R5cGUgPT0gNCkgZmlsZV9uYW1lX3JlZ2V4ID0gLyg/PD1cXCgpLiooPz1cXCkpLztcbiAgICAgICAgYWx0X3JlZ2V4ID0gLyg/PD1cXFspKF4kfC4qKSg/PVxcXSkvO1xuICAgIH1cblxuICAgIHZhciBmaWxlX21hdGNoID0gbWF0Y2hbMF0ubWF0Y2goZmlsZV9uYW1lX3JlZ2V4KTtcbiAgICB2YXIgYWx0X21hdGNoID0gbWF0Y2hbMF0ubWF0Y2goYWx0X3JlZ2V4KTtcblxuICAgIHJldHVybiB7IGZpbGVOYW1lOiBmaWxlX21hdGNoID8gZmlsZV9tYXRjaFswXSA6ICcnLCBcbiAgICAgICAgICAgIGFsdFRleHQ6IGFsdF9tYXRjaCA/IGFsdF9tYXRjaFswXSA6ICcnIH1cbn0gICAgXG5cbi8vIEdldHRpbmcgQWN0aXZlIE1hcmtkb3duIEZpbGVcbmV4cG9ydCBjb25zdCBnZXRBY3RpdmVOb3RlRmlsZSA9ICh3b3Jrc3BhY2U6IFdvcmtzcGFjZSkgPT4ge1xuICAgIHJldHVybiB3b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xufVxuXG4vLyBHZXQgQWN0aXZlIEVkaXRvclxuZXhwb3J0IGNvbnN0IGdldENtRWRpdG9yID0gKHdvcmtzcGFjZTogV29ya3NwYWNlKTogQ29kZU1pcnJvci5FZGl0b3IgPT4ge1xuICAgIHJldHVybiB3b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpPy5zb3VyY2VNb2RlPy5jbUVkaXRvclxufVxuXG5jb25zdCBnZXRQYXRoT2ZWYXVsdCA9ICh2YXVsdDogVmF1bHQpOiBzdHJpbmcgPT4ge1xuICAgIHZhciBwYXRoID0gdmF1bHQuYWRhcHRlci5iYXNlUGF0aDtcbiAgICBpZihwYXRoLnN0YXJ0c1dpdGgoJy8nKSkgcmV0dXJuICdhcHA6Ly9sb2NhbCcgKyBwYXRoXG4gICAgcmV0dXJuICdhcHA6Ly9sb2NhbC8nICsgcGF0aFxufVxuXG4vLyBUZW1wb3JhcnkgU29sdXRpb24gdW50aWwgZ2V0UmVzb3VyY2VQYXRoIGltcHJvdmVkIFxuZXhwb3J0IGNvbnN0IGdldFBhdGhPZkltYWdlID0gKHZhdWx0OiBWYXVsdCwgaW1hZ2U6IFRGaWxlKSA9PiB7XG4gICAgLy8gdmF1bHQuZ2V0UmVzb3VyY2VQYXRoKGltYWdlKSBcbiAgICByZXR1cm4gZ2V0UGF0aE9mVmF1bHQodmF1bHQpICsgJy8nICsgaW1hZ2UucGF0aFxufVxuXG5leHBvcnQgY29uc3QgZ2V0RmlsZUNtQmVsb25nc1RvID0gKGNtOiBDb2RlTWlycm9yLkVkaXRvciwgd29ya3NwYWNlOiBXb3Jrc3BhY2UpID0+IHtcbiAgICBsZXQgbGVhZnMgPSB3b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFwibWFya2Rvd25cIik7XG4gICAgZm9yKGxldCBpPTA7IGkgPCBsZWFmcy5sZW5ndGg7IGkrKyl7XG4gICAgICAgIGlmKGxlYWZzW2ldLnZpZXcgaW5zdGFuY2VvZiBNYXJrZG93blZpZXcgJiYgbGVhZnNbaV0udmlldy5zb3VyY2VNb2RlPy5jbUVkaXRvciA9PSBjbSl7XG4gICAgICAgICAgICByZXR1cm4gbGVhZnNbaV0udmlldy5maWxlXG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59ICIsImltcG9ydCB7IEFwcCwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBnZXRGaWxlTmFtZUFuZEFsdFRleHQsIGdldF9saW5rX2luX2xpbmUsIGdldF9pbWFnZV9pbl9saW5lLFxuICAgICAgICBnZXRBY3RpdmVOb3RlRmlsZSwgZ2V0UGF0aE9mSW1hZ2UsIGdldEZpbGVDbUJlbG9uZ3NUbyxcbiAgICAgICAgY2xlYXJMaW5lV2lkZ2V0cyB9IGZyb20gJy4vdXRpbHMnO1xuXG4vLyBDaGVjayBTaW5nbGUgTGluZVxuZXhwb3J0IGNvbnN0IGNoZWNrX2xpbmU6IGFueSA9IChjbTogQ29kZU1pcnJvci5FZGl0b3IsIGxpbmVfbnVtYmVyOiBudW1iZXIsIHRhcmdldEZpbGU6VEZpbGUsIGFwcDogQXBwKSA9PiB7XG5cbiAgICAvLyBHZXQgdGhlIExpbmUgZWRpdGVkXG4gICAgY29uc3QgbGluZSA9IGNtLmxpbmVJbmZvKGxpbmVfbnVtYmVyKTtcbiAgICBcbiAgICBpZihsaW5lID09PSBudWxsKSByZXR1cm47XG5cbiAgICAvLyBDaGVjayBpZiB0aGUgbGluZSBpcyBhbiBpbnRlcm5ldCBsaW5rXG4gICAgY29uc3QgbGlua19pbl9saW5lID0gZ2V0X2xpbmtfaW5fbGluZShsaW5lLnRleHQpO1xuICAgIGNvbnN0IGltZ19pbl9saW5lID0gZ2V0X2ltYWdlX2luX2xpbmUobGluZS50ZXh0KTtcblxuICAgIC8vIENsZWFyIHRoZSB3aWRnZXQgaWYgbGluayB3YXMgcmVtb3ZlZFxuICAgIHZhciBsaW5lX2ltYWdlX3dpZGdldCA9IGxpbmUud2lkZ2V0cyA/IGxpbmUud2lkZ2V0cy5maWx0ZXIoKHdpZDogeyBjbGFzc05hbWU6IHN0cmluZzsgfSkgPT4gd2lkLmNsYXNzTmFtZSA9PT0gJ296LWltYWdlLXdpZGdldCcpIDogZmFsc2U7XG4gICAgaWYobGluZV9pbWFnZV93aWRnZXQgJiYgIShpbWdfaW5fbGluZS5yZXN1bHQgfHwgbGlua19pbl9saW5lLnJlc3VsdCkpIGxpbmVfaW1hZ2Vfd2lkZ2V0WzBdLmNsZWFyKCk7XG5cbiAgICAvLyBJZiBhbnkgb2YgcmVnZXggbWF0Y2hlcywgaXQgd2lsbCBhZGQgaW1hZ2Ugd2lkZ2V0XG4gICAgaWYobGlua19pbl9saW5lLnJlc3VsdCB8fCBpbWdfaW5fbGluZS5yZXN1bHQpe1xuICAgICAgICAgICAgXG4gICAgICAgIC8vIENsZWFyIHRoZSBpbWFnZSB3aWRnZXRzIGlmIGV4aXN0c1xuICAgICAgICBjbGVhckxpbmVXaWRnZXRzKGxpbmUpO1xuXG4gICAgICAgIC8vIEdldCB0aGUgZmlsZSBuYW1lIGFuZCBhbHQgdGV4dCBkZXBlbmRpbmcgb24gZm9ybWF0XG4gICAgICAgIHZhciBmaWxlbmFtZSA9ICcnO1xuICAgICAgICB2YXIgYWx0ID0gJyc7XG4gICAgICAgIFxuICAgICAgICBpZihsaW5rX2luX2xpbmUucmVzdWx0KXtcbiAgICAgICAgICAgIC8vIGxpbmtUeXBlIDMgYW5kIDRcbiAgICAgICAgICAgIGZpbGVuYW1lID0gZ2V0RmlsZU5hbWVBbmRBbHRUZXh0KGxpbmtfaW5fbGluZS5saW5rVHlwZSwgbGlua19pbl9saW5lLnJlc3VsdCkuZmlsZU5hbWVcbiAgICAgICAgICAgIGFsdCA9IGdldEZpbGVOYW1lQW5kQWx0VGV4dChsaW5rX2luX2xpbmUubGlua1R5cGUsIGxpbmtfaW5fbGluZS5yZXN1bHQpLmFsdFRleHRcbiAgICAgICAgfSBlbHNlIGlmKGltZ19pbl9saW5lLnJlc3VsdCl7XG4gICAgICAgICAgICBmaWxlbmFtZSA9IGdldEZpbGVOYW1lQW5kQWx0VGV4dChpbWdfaW5fbGluZS5saW5rVHlwZSwgaW1nX2luX2xpbmUucmVzdWx0KS5maWxlTmFtZTtcbiAgICAgICAgICAgIGFsdCA9IGdldEZpbGVOYW1lQW5kQWx0VGV4dChpbWdfaW5fbGluZS5saW5rVHlwZSwgaW1nX2luX2xpbmUucmVzdWx0KS5hbHRUZXh0XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSBJbWFnZVxuICAgICAgICBjb25zdCBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcblxuICAgICAgICAvLyBQcmVwYXJlIHRoZSBzcmMgZm9yIHRoZSBJbWFnZVxuICAgICAgICBpZihsaW5rX2luX2xpbmUucmVzdWx0KXtcbiAgICAgICAgICAgIGltZy5zcmMgPSBmaWxlbmFtZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFNvdXJjZSBQYXRoXG4gICAgICAgICAgICB2YXIgc291cmNlUGF0aCA9ICcnO1xuICAgICAgICAgICAgaWYodGFyZ2V0RmlsZSAhPSBudWxsKXtcbiAgICAgICAgICAgICAgICBzb3VyY2VQYXRoID0gdGFyZ2V0RmlsZS5wYXRoO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgbGV0IGFjdGl2ZU5vdGVGaWxlID0gZ2V0QWN0aXZlTm90ZUZpbGUoYXBwLndvcmtzcGFjZSk7XG4gICAgICAgICAgICAgICAgc291cmNlUGF0aCA9IGFjdGl2ZU5vdGVGaWxlID8gYWN0aXZlTm90ZUZpbGUucGF0aCA6ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGltYWdlID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QoZGVjb2RlVVJJQ29tcG9uZW50KGZpbGVuYW1lKSwgc291cmNlUGF0aCk7XG4gICAgICAgICAgICBpZihpbWFnZSAhPSBudWxsKSBpbWcuc3JjID0gZ2V0UGF0aE9mSW1hZ2UoYXBwLnZhdWx0LCBpbWFnZSlcbiAgICAgICAgfVxuICAgICAgICAvLyBJbWFnZSBQcm9wZXJ0aWVzXG4gICAgICAgIGltZy5hbHQgPSBhbHQ7XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgSW1hZ2Ugd2lkZ2V0IHVuZGVyIHRoZSBJbWFnZSBNYXJrZG93blxuICAgICAgICBjbS5hZGRMaW5lV2lkZ2V0KGxpbmVfbnVtYmVyLCBpbWcsIHtjbGFzc05hbWU6ICdvei1pbWFnZS13aWRnZXQnfSk7ICAgICAgICAgICAgXG4gICAgfVxufVxuXG4vLyBDaGVjayBBbGwgTGluZXMgRnVuY3Rpb25cbmV4cG9ydCBjb25zdCBjaGVja19saW5lczogYW55ID0gKGNtOiBDb2RlTWlycm9yLkVkaXRvciwgZnJvbTogbnVtYmVyLCB0bzogbnVtYmVyLCBhcHA6IEFwcCkgPT4ge1xuICAgIC8vIExhc3QgVXNlZCBMaW5lIE51bWJlciBpbiBDb2RlIE1pcnJvclxuICAgIHZhciBmaWxlID0gZ2V0RmlsZUNtQmVsb25nc1RvKGNtLCBhcHAud29ya3NwYWNlKTtcbiAgICBmb3IobGV0IGk9ZnJvbTsgaSA8PSB0bzsgaSsrKXtcbiAgICAgICAgY2hlY2tfbGluZShjbSwgaSwgZmlsZSwgYXBwKTtcbiAgICB9XG59IiwiaW1wb3J0IHsgUGx1Z2luLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBjbGVhcldpZGdldHMsIGdldEZpbGVDbUJlbG9uZ3NUbyB9IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IHsgY2hlY2tfbGluZSwgY2hlY2tfbGluZXMgfSBmcm9tICcuL2NoZWNrLWxpbmUnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBPemFuSW1hZ2VQbHVnaW4gZXh0ZW5kcyBQbHVnaW57XG5cbiAgICBvbmxvYWQoKXtcbiAgICAgICAgY29uc29sZS5sb2coJ0ltYWdlIGluIEVkaXRvciBQbHVnaW4gaXMgbG9hZGVkJyk7XG4gICAgICAgIC8vIFJlZ2lzdGVyIGV2ZW50IGZvciBlYWNoIGNoYW5nZVxuICAgICAgICB0aGlzLnJlZ2lzdGVyQ29kZU1pcnJvciggKGNtOiBDb2RlTWlycm9yLkVkaXRvcikgPT4ge1xuICAgICAgICAgICAgY20ub24oXCJjaGFuZ2VcIiwgdGhpcy5jb2RlbWlycm9yTGluZUNoYW5nZXMpO1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVJbml0aWFsTG9hZChjbSk7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgb251bmxvYWQoKXtcbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLml0ZXJhdGVDb2RlTWlycm9ycyggKGNtKSA9PiB7XG4gICAgICAgICAgICBjbS5vZmYoXCJjaGFuZ2VcIiwgdGhpcy5jb2RlbWlycm9yTGluZUNoYW5nZXMpO1xuICAgICAgICAgICAgY2xlYXJXaWRnZXRzKGNtKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdJbWFnZSBpbiBFZGl0b3IgUGx1Z2luIGlzIHVubG9hZGVkJyk7XG4gICAgfVxuXG4gICAgLy8gTGluZSBFZGl0IENoYW5nZXNcbiAgICBjb2RlbWlycm9yTGluZUNoYW5nZXMgPSAoY206IGFueSwgY2hhbmdlOiBhbnkpID0+IHtcbiAgICAgICAgY2hlY2tfbGluZXMoY20sIGNoYW5nZS5mcm9tLmxpbmUsIGNoYW5nZS5mcm9tLmxpbmUgKyBjaGFuZ2UudGV4dC5sZW5ndGggLSAxLCB0aGlzLmFwcCk7XG4gICAgfVxuXG4gICAgLy8gT25seSBUcmlnZ2VyZWQgZHVyaW5nIGluaXRpYWwgTG9hZFxuICAgIGhhbmRsZUluaXRpYWxMb2FkID0gKGNtOiBDb2RlTWlycm9yLkVkaXRvcikgPT4ge1xuICAgICAgICB2YXIgbGFzdExpbmUgPSBjbS5sYXN0TGluZSgpO1xuICAgICAgICB2YXIgZmlsZSA9IGdldEZpbGVDbUJlbG9uZ3NUbyhjbSwgdGhpcy5hcHAud29ya3NwYWNlKTtcbiAgICAgICAgZm9yKGxldCBpPTA7IGkgPCBsYXN0TGluZTsgaSsrKXtcbiAgICAgICAgICAgIGNoZWNrX2xpbmUoY20sIGksIGZpbGUsIHRoaXMuYXBwKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbn0iXSwibmFtZXMiOlsiTWFya2Rvd25WaWV3IiwiUGx1Z2luIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFFQTtBQUNPLE1BQU0sWUFBWSxHQUFHLENBQUMsRUFBcUI7SUFDOUMsSUFBSSxRQUFRLEdBQUcsRUFBRSxDQUFDLFFBQVEsRUFBRSxDQUFDO0lBQzdCLEtBQUksSUFBSSxDQUFDLEdBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxRQUFRLEVBQUUsQ0FBQyxFQUFFLEVBQUM7UUFDNUIsTUFBTSxJQUFJLEdBQUcsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM1QixnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUMxQjtBQUNMLENBQUMsQ0FBQTtBQUVEO0FBQ08sTUFBTSxnQkFBZ0IsR0FBRyxDQUFDLElBQVM7SUFDdEMsSUFBRyxJQUFJLENBQUMsT0FBTyxFQUFDO1FBQ1osS0FBSSxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsT0FBTyxFQUFDO1lBQzFCLElBQUksR0FBRyxDQUFDLFNBQVMsS0FBSyxpQkFBaUIsRUFBQztnQkFDcEMsR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFBO2FBQ2Q7U0FDSjtLQUNKO0FBQ0wsQ0FBQyxDQUFBO0FBRUQ7QUFDTyxNQUFNLGdCQUFnQixHQUFHLENBQUMsSUFBWTtJQUN6QyxNQUFNLGtCQUFrQixHQUFHLGtDQUFrQyxDQUFBO0lBQzdELE1BQU0sa0JBQWtCLEdBQUcseUNBQXlDLENBQUE7SUFDcEUsTUFBTSxP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
